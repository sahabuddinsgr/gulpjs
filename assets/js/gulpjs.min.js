/**
 * gulpjs v1.0.0 - gulpjs is automation for app
 * @copyright 2015-2019 sahabuddinsgr <sahabuddinsgr@gmail.com>
 * @license MIT
 */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}!function(e){"use strict";var i=function(){function a(e){var t=e.imgsArea;_classCallCheck(this,a),this.imgsArea=t,this.modalMarkup(),this.API_base="https://spotted.ai/echobase-web/rest/images/predicate/",this.imgs=document.querySelectorAll("".concat(this.imgsArea," img")),this.loading='<div class="lds-dual-ring"></div>',this.popupWrap=document.querySelector(".mystery_popup"),this.popupModal=document.querySelector('[data-popup-modal="masterylabel"]'),this.modalCloseTrigger=document.querySelector(".popup-modal__close"),this.bodyBlackout=document.querySelector(".body-blackout")}return _createClass(a,[{key:"modalMarkup",value:function(){document.body.innerHTML+='\n            \x3c!-- Modals --\x3e\n            <div class="popup-modal-container" data-popup-modal="masterylabel">\n                <i class="popup-modal__close">x</i>\n                <div class="body-blackout"></div>\n                <div class="popup-modal shadow">\n                    <div class="mystery_popup">\n                    </div>\n                </div>\n            </div>'}},{key:"fetchData",value:function(e){var t=this,a=this.API_base+encodeURIComponent(e);this.popupModal.classList.add("is--visible"),this.bodyBlackout.classList.add("is-blacked-out"),this.popupModal.classList.contains("is--visible")&&document.body.classList.add("mystery_popup_active"),this.popupWrap.innerHTML=this.loading,fetch(a,{method:"GET",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log("data",e),t.loadInPopup(e)})}},{key:"loadInPopup",value:function(e){var t=e.messages[0].attachment;if(t)a=t.payload.elements.map(function(e){var t=e.buttons,a=e.image_url,o=e.title,s=t[0].url;return'<li><a href="'.concat(s,'" target="__blank"><img src="').concat(a,'" alt="').concat(o,'" /></a></li>')}).join(" ");else var a="<p>".concat(e.messages[0].text,"</p>");this.popupWrap.innerHTML="<ul>".concat(a,"</ul>")}}]),a}();e.MysteryLabel={init:function(e){var t=(0<arguments.length&&void 0!==e?e:{}).container,a=void 0===t?"body":t,o="body"===a?a:"#".concat(a),s=new i({imgsArea:o});s.imgs.forEach(function(e){var t=e.getAttribute("src"),a=e.parentNode,o=document.createElement("div");o.classList.add("spot-img"),a.replaceChild(o,e),o.appendChild(e),o.style.cursor="pointer",o.addEventListener("click",function(e){e.preventDefault(),s.fetchData(t)}),s.modalCloseTrigger.addEventListener("click",function(){s.popupModal.classList.remove("is--visible"),s.bodyBlackout.classList.remove("is-blacked-out"),document.body.classList.remove("mystery_popup_active")}),s.bodyBlackout.addEventListener("click",function(){s.popupModal.classList.remove("is--visible"),s.bodyBlackout.classList.remove("is-blacked-out"),document.body.classList.remove("mystery_popup_active")})})}}}(window);